# å¯¹è¯å³æ–‡æ¡£æµ‹è¯•åœºæ™¯
# ç”¨äºéªŒè¯ CRDT å®æ—¶åä½œå’Œå†²çªè§£å†³èƒ½åŠ›

---
id: 4a5b6c7d-8e9f-1234-5678-90abcdef1234
type: metadata
name: document-meta
metadata:
  title: "Real-time Collaboration Test Document"
  version: "1.0"
  created: "2024-01-15"
  purpose: "Testing CRDT conflict resolution and real-time sync"
  participants: ["Client-A", "Client-B", "Client-C"]
---

---
id: 5b6c7d8e-9f01-2345-6789-0abcdef12345
type: markdown
name: initial-content
metadata:
  description: "æ–‡æ¡£çš„åˆå§‹å†…å®¹ï¼Œå°†è¢«å¹¶å‘ä¿®æ”¹"
  tags: ["initial", "test", "collaborative"]
  test_scenario: "baseline"
---
# åä½œæ–‡æ¡£æµ‹è¯•

Initial content.

è¿™æ˜¯ä¸€ä¸ªç”¨äºæµ‹è¯•å®æ—¶åä½œçš„æ–‡æ¡£ã€‚å¤šä¸ªå®¢æˆ·ç«¯ä¼šåŒæ—¶å¯¹è¿™ä¸ªæ–‡æ¡£è¿›è¡Œç¼–è¾‘ï¼Œä»¥éªŒè¯ CRDT çš„å†²çªè§£å†³èƒ½åŠ›ã€‚

---
id: 6c7d8e9f-0123-4567-89ab-cdef12345678
type: markdown
name: test-block-a
metadata:
  description: "Client-A ä¸“ç”¨çš„æµ‹è¯•åŒºå—"
  tags: ["client-a", "test"]
  assigned_to: "Client-A"
---
## Client-A çš„è´¡çŒ®

è¿™æ˜¯ Client-A æ·»åŠ çš„å†…å®¹åŒºå—ã€‚è¿™ä¸ªåŒºå—å°†åœ¨æµ‹è¯•è¿‡ç¨‹ä¸­è¢« Client-A ä¿®æ”¹ã€‚

### æµ‹è¯•å†…å®¹
- [ ] æ·»åŠ æ–‡æœ¬å†…å®¹
- [ ] ä¿®æ”¹ç°æœ‰å†…å®¹
- [ ] æµ‹è¯•å¹¶å‘ç¼–è¾‘

---
id: 7d8e9f01-2345-6789-abcd-ef1234567890
type: markdown
name: test-block-b
metadata:
  description: "Client-B ä¸“ç”¨çš„æµ‹è¯•åŒºå—"
  tags: ["client-b", "test"]
  assigned_to: "Client-B"
---
## Client-B çš„è´¡çŒ®

è¿™æ˜¯ Client-B æ·»åŠ çš„å†…å®¹åŒºå—ã€‚è¿™ä¸ªåŒºå—å°†åœ¨æµ‹è¯•è¿‡ç¨‹ä¸­è¢« Client-B ä¿®æ”¹ã€‚

### æµ‹è¯•å†…å®¹
- [ ] åŒæ­¥éªŒè¯æµ‹è¯•
- [ ] å†²çªåœºæ™¯æµ‹è¯•
- [ ] çŠ¶æ€æ”¶æ•›éªŒè¯

---
id: 8e9f0123-4567-89ab-cdef-123456789012
type: markdown
name: conflict-test-area
metadata:
  description: "ä¸“é—¨ç”¨äºæµ‹è¯•å†²çªè§£å†³çš„åŒºåŸŸ"
  tags: ["conflict", "test", "critical"]
  concurrent_edit_target: true
---
## å†²çªæµ‹è¯•åŒºåŸŸ

è¿™ä¸ªåŒºåŸŸå°†è¢« Client-A å’Œ Client-B åŒæ—¶ç¼–è¾‘ï¼Œç”¨äºæµ‹è¯•å†²çªè§£å†³æœºåˆ¶ã€‚

**åŸå§‹æ–‡æœ¬**: Initial content for conflict testing.

**æµ‹è¯•è®¡åˆ’**:
1. Client-A å°†ä¿®æ”¹ä¸º: "My initial content for conflict testing."
2. Client-B å°†ä¿®æ”¹ä¸º: "Our initial content for conflict testing."
3. éªŒè¯ CRDT åˆå¹¶ç»“æœ

**é¢„æœŸç»“æœ**: è‡ªåŠ¨åˆå¹¶åçš„æ–‡æœ¬åº”è¯¥åŒ…å«ä¸¤ä¸ªå®¢æˆ·ç«¯çš„ä¿®æ”¹ï¼Œå¹¶ä¸”æœ€ç»ˆçŠ¶æ€åœ¨æ‰€æœ‰å®¢æˆ·ç«¯ä¸Šä¸€è‡´ã€‚

---
id: 9f012345-6789-abcd-ef12-3456789012ab
type: markdown
name: collaboration-log
metadata:
  description: "åä½œè¿‡ç¨‹çš„æ—¥å¿—è®°å½•"
  tags: ["log", "tracking"]
  auto_update: true
---
# åä½œæ—¥å¿—

è®°å½•æµ‹è¯•è¿‡ç¨‹ä¸­çš„æ‰€æœ‰åä½œæ´»åŠ¨ï¼š

## æµ‹è¯•ä¼šè¯è®°å½•

### ä¼šè¯ 1: åŸºç¡€åŒæ­¥æµ‹è¯•
- **æ—¶é—´**: 2024-01-15 10:00:00
- **å‚ä¸è€…**: Client-A, Client-B
- **æ“ä½œ**: Client-A æ·»åŠ  test-block-a, Client-B æ·»åŠ  test-block-b
- **ç»“æœ**: âœ… æ— å†²çªï¼ŒæˆåŠŸåŒæ­¥

### ä¼šè¯ 2: å¹¶å‘ç¼–è¾‘æµ‹è¯•
- **æ—¶é—´**: 2024-01-15 10:05:00
- **å‚ä¸è€…**: Client-A, Client-B
- **æ“ä½œ**: åŒæ—¶ä¿®æ”¹ conflict-test-area çš„åŒä¸€è¡Œæ–‡æœ¬
- **ç»“æœ**: ğŸ”„ ç­‰å¾…éªŒè¯

### ä¼šè¯ 3: å¤šå®¢æˆ·ç«¯åä½œ
- **æ—¶é—´**: 2024-01-15 10:10:00
- **å‚ä¸è€…**: Client-A, Client-B, Client-C
- **æ“ä½œ**: ä¸‰æ–¹åŒæ—¶ç¼–è¾‘ä¸åŒåŒºå—
- **ç»“æœ**: ğŸ”„ ç­‰å¾…éªŒè¯

---
id: 01234567-89ab-cdef-1234-56789012abcd
type: markdown
name: verification-checklist
metadata:
  description: "æµ‹è¯•éªŒè¯æ¸…å•"
  tags: ["verification", "checklist"]
  critical: true
---
# éªŒè¯æ¸…å•

## CRDT åŒæ­¥éªŒè¯

### æ— å†²çªç¼–è¾‘
- [ ] Client-A å’Œ Client-B åˆ†åˆ«ç¼–è¾‘ä¸åŒåŒºå—
- [ ] æ‰€æœ‰å˜æ›´éƒ½æˆåŠŸåŒæ­¥åˆ°å…¶ä»–å®¢æˆ·ç«¯
- [ ] æ–‡æ¡£çŠ¶æ€åœ¨æ‰€æœ‰å®¢æˆ·ç«¯ä¸Šä¸€è‡´ï¼ˆç›¸åŒçš„ hash å€¼ï¼‰

### å†²çªç¼–è¾‘
- [ ] Client-A å’Œ Client-B åŒæ—¶ç¼–è¾‘ conflict-test-area
- [ ] CRDT è‡ªåŠ¨åˆå¹¶å†²çªå†…å®¹
- [ ] åˆå¹¶ç»“æœç¬¦åˆé¢„æœŸï¼ˆåŒ…å«ä¸¤æ–¹çš„ä¿®æ”¹ï¼‰
- [ ] æ‰€æœ‰å®¢æˆ·ç«¯çš„æ–‡æ¡£ hash å€¼ç›¸åŒ

## æ€§èƒ½éªŒè¯
- [ ] åŒæ­¥å»¶è¿Ÿ < 500msï¼ˆæœ¬åœ°ç½‘ç»œï¼‰
- [ ] å†…å­˜ä½¿ç”¨åˆç†
- [ ] æ— å†…å­˜æ³„æ¼

## å¯é æ€§éªŒè¯
- [ ] ç½‘ç»œä¸­æ–­åèƒ½å¤Ÿæ¢å¤åŒæ­¥
- [ ] å®¢æˆ·ç«¯é‡å¯åèƒ½å¤Ÿè·å–å®Œæ•´å†å²
- [ ] å¹¶å‘æ“ä½œä¸ä¼šå¯¼è‡´æ•°æ®ä¸¢å¤±

---
id: 12345678-9abc-def1-2345-6789012abcde
type: code
name: test-script-config
metadata:
  language: yaml
  description: "è‡ªåŠ¨åŒ–æµ‹è¯•è„šæœ¬çš„é…ç½®"
  tags: ["config", "automation"]
---
# å¯¹è¯å³æ–‡æ¡£æµ‹è¯•é…ç½®
test_config:
  name: "conversation-as-document"
  timeout_ms: 30000
  
  participants:
    - id: "client-a"
      zenoh_config:
        endpoints: ["tcp/127.0.0.1:7447"]
      test_actions:
        - action: "create_block"
          target: "test-block-a"
          timestamp: 1000
        - action: "edit_content"
          target: "conflict-test-area"
          new_text: "My initial content for conflict testing."
          timestamp: 5000
          
    - id: "client-b"
      zenoh_config:
        endpoints: ["tcp/127.0.0.1:7447"]
      test_actions:
        - action: "create_block"
          target: "test-block-b"
          timestamp: 2000
        - action: "edit_content"
          target: "conflict-test-area"
          new_text: "Our initial content for conflict testing."
          timestamp: 5100
  
  verification:
    - type: "hash_consistency"
      description: "All clients have same document hash"
      timeout_ms: 10000
    - type: "content_merge"
      description: "Conflict area contains both edits"
      expected_pattern: "(?=.*My)(?=.*Our).*initial content"
    - type: "block_count"
      description: "All blocks are present"
      expected_count: 7

  zenoh_network:
    router: "tcp/127.0.0.1:7447"
    discovery: "multicast"
    storage_backend: "memory"