# Justfile for ELFI documentation project
# Run `just --list` to see available commands

# Install required tools for documentation
install-tools:
    cargo install mdbook mdbook-mermaid

# Setup mermaid support
setup: install-tools
    #!/usr/bin/env bash
    export PATH="$HOME/.cargo/bin:$PATH"
    mdbook-mermaid install .

# Build the documentation
build:
    #!/usr/bin/env bash
    export PATH="$HOME/.cargo/bin:$PATH"
    mdbook build

# Build with API docs integration
build-with-api:
    #!/usr/bin/env bash
    export PATH="$HOME/.cargo/bin:$PATH"
    (cd .. && cargo doc --no-deps)
    mdbook build

# Serve the documentation locally with auto-reload
serve:
    #!/usr/bin/env bash
    export PATH="$HOME/.cargo/bin:$PATH"
    mdbook serve --open

# Clean build artifacts
clean:
    #!/usr/bin/env bash
    export PATH="$HOME/.cargo/bin:$PATH"
    mdbook clean

# Generate merged markdown documentation
merge:
    ./merge_markdown.sh

# Generate merged markdown without code blocks
merge-no-code:
    ./merge_markdown.sh --no-code

# Full setup for new developers
init: install-tools setup
    @echo "âœ“ Documentation tools installed and configured!"
    @echo "Run 'just serve' to start the development server."